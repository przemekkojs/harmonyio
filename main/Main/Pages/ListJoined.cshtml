@page
@model Main.Pages.ListJoined

@{
}

<div class="container mt-5">
    <div class="row mb-3">
        <h2>Otwarte</h2>
    </div>
    <div class="row mb-3">
        <div class="p-2">
            <div class="row align-items-center">
                <div class="col-3">
                    <strong>Nazwa</strong>
                </div>
                <div class="col-3">
                    <strong>Termin</strong>
                </div>
                <div class="col-6 text-end">

                </div>
            </div>
        </div>
    </div>
    @foreach (var quiz in Model.Joined.Where(q => q.CloseDate > DateTime.Now))
    {
        <div class="row mb-3">
            <div class="card p-3 bg-light">
                <div class="row align-items-center">
                    <div class="col-3">
                        @quiz.Name
                    </div>
                    <div class="col-3">
                        @quiz.CloseDate
                    </div>
                    <div class="col-6 text-end">
                        <a href="#" class="btn btn-outline-primary btn-sm">Zobacz</a>
                    </div>
                </div>
            </div>
        </div>
    }

</div>
<hr class="mt-3"/>
<div class="container mt-3">

    <div class="row mb-3">
        <h2>Zamknięte</h2>
    </div>
    <div class="row mb-3">
        <div class="p-2">
            <div class="row align-items-center">
                <div class="col-3">
                    <strong>Nazwa</strong>
                </div>
                <div class="col-3">
                    <strong>Data zakończenia</strong>
                </div>
                <div class="col-3">
                    <strong>Ocena</strong>
                </div>
                <div class="col-3 text-end">

                </div>
            </div>
        </div>
    </div>
    @foreach (var quiz in Model.Joined.Where(q => q.CloseDate < DateTime.Now))
    {
        <div class="row mb-3">
            <div class="card p-3 bg-light">
                <div class="row align-items-center">
                    <div class="col-3">
                        @quiz.Name
                    </div>
                    <div class="col-3">
                        @quiz.CloseDate
                    </div>
                    <div class="col-3">
                        @quiz.QuizResults.Where(qr => qr.User == Model.AppUser).Select(qr => qr.Grade.HasValue ? qr.Grade.ToString() : "nie ocenione").First()
                    </div>
                    <div class="col-3 text-end">
                        <a href="#" class="btn btn-outline-primary btn-sm">Zobacz</a>
                    </div>
                </div>
            </div>
        </div>
    }
</div>